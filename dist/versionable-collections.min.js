!function(t){"use strict";function e(t,e,a){Object.defineProperty(t,e,a)}function a(t,a,n){e(t,a,{enumerable:!1,value:n})}function n(){e(this,"_version",{value:0,enumerable:!0,writable:!0})}function o(t){n.call(this),e(this,"_data",{value:t||[],enumerable:!1}),e(this,"length",{enumerable:!1,get:function(){return this._data.length}})}function i(t){n.call(this),e(this,"_data",{value:t||{},enumerable:!1})}a(n.prototype,"_updateVersion",function(){this._version+=1}),o.prototype=Object.create(n.prototype),a(o.prototype,"toValue",function(){return this._data.slice()}),"push pop shift unshift splice".split(" ").forEach(function(t){a(o.prototype,t,function(){this._data[t].apply(this._data,arguments),this._updateVersion()})}),"map filter".split(" ").forEach(function(t){a(o.prototype,t,function(){return new o(this._data[t].apply(this._data,arguments))})}),"reduce every reduceRight".split(" ").forEach(function(t){a(o.prototype,t,function(){return this._data[t].apply(this._data,arguments)})}),a(o.prototype,"forEach",function(){this._data.forEach.apply(this._data,arguments),this._updateVersion()}),a(o.prototype,"concat",function(t){return new o(this._data.concat(t._data))}),"indexOf lastIndexOf".split(" ").forEach(function(t){a(o.prototype,t,function(){return this._data[t].apply(this._data,arguments)})}),a(o.prototype,"sort",function(){return new o(this._data.sort.apply(this._data,arguments))}),i.prototype=Object.create(n.prototype),a(i.prototype,"set",function(t,e){this._data[t]=e,this._updateVersion()}),a(i.prototype,"get",function(t){return this._data[t]}),a(i.prototype,"remove",function(t){var e=this._data[t];return void 0!==this._data[t]&&(delete this._data[t],this._updateVersion()),e}),a(i.prototype,"keys",function(){return Object.keys(this._data)}),t.VersionableList=o,t.VersionableMap=i}("undefined"==typeof window?module.exports:window);